<!--
# Copyright (c) 2021 - 2025 Advanced Micro Devices, Inc. All rights reserved.
#
#-------------------------------------------------------------------------------------------------
-->
<!DOCTYPE html>
<html>
<body>
    <h1 id="background">Background</h1>
    <p><b>Important:</b> Before proceeding to install the service application, refer to <a href="page_guide_usingservice.html">Using ADLX in a Windows system service application</a> to determine if this procedure is required.</p>
    <ul>
        <li>ADLX v1.4 and above can be used directly in a Windows system service application, providing access to a limited set of ADLX functionality when ADLX runs in Session 0.<br/>
        If the Windows system service application requires additional ADLX functionality, it can be accessed through a user mode process.</li>
        <li>ADLX v1.3 and below cannot be used directly in a Windows system service application, and can be accessed through a user mode process.</li>
    </ul>
    <p>This sample demonstrates how to create a user process from within a Windows system service application to access full ADLX functionality, provided through a communication mechanism between the user mode process that uses ADLX, and the system service.</p>
    <p>This process uses shared memory to obtain ADLX information from the user process into the system service. Every three seconds, the sample service will output debug information - including vendor id and name - for the first GPU enumerated.</p>
    <h1 id="usage">SamplePath</h1>
    <p>/Samples/CPP/ServiceCall/GPUService</p>
    <p>The sample builds GPUService.exe, and this application must be installed and executed as a Windows service application.</p>
    <p>The sample must be compiled with debug information in order to debug the service.</p>
    <h2 id="install-this-service">Installing the ADLX GPU Service application</h2>
    <ol>
        <li>Run the Windows Command Processor application (cmd.exe) as administrator.</li>
        <li>In Windows Command Processor, change the working directory to the path where GPUService.exe is built.</li>
        <li>In Windows Command Processor, execute: <code>GPUService.exe -install</code>.</li>
        <li>Press <b>Win + R</b> to launch Windows Services, and enter: <code>services.msc</code>.</li>
        <li>In Windows Services, select <b>ADLX GPU Service</b>.</li>
    </ol>
    <h2 id="debug-this-service">Debugging the ADLX GPU Service application</h2>
    <ol>
        <li>Launch DebugView as administrator.</li>
        <li>In DebugView, click <b>Capture</b> in the top menu and select the following options:
            <ul>
                <li>Capture Win32</li>
                <li>Capture Global Win32</li>
                <li>Pass-Through</li>
                <li>Capture Events</li>
            </ul>
        <li>Press <b>Win + R</b> and enter: <code>services.msc</code> to launch Windows Services.</li>
        <li>Right-click on Windows Services > ADLX GPU Service, and select <b>Start</b> from the menu.</li>
        <li>In DebugView, note that every 3 seconds the ADLX GPU Service outputs debug information with the vendor id and and name for the first GPU enumerated, prefixed with <b>ADLX Call Service:</b>.</li>
    </ol>
    <h2 id="uninstall-adlx-gpu-service">Uninstalling the ADLX GPU Service application</h2>
    <ol>
        <li>Run the Windows Command Processor application (cmd.exe) as administrator.</li>
        <li>In Windows Command Processor, execute: <code>GPUService.exe â€“remove</code>.</li>
    </ol>
</body>
</html>